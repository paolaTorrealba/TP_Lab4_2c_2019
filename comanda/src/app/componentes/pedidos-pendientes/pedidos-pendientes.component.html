<app-principal></app-principal>
<h1>Pedidos Pendientes </h1>   
    <table mat-table [dataSource]="pedidos">
      <tr>
          <ng-container matColumnDef="Mesa">
              <th mat-header-cell *matHeaderCellDef> Mesa </th>
              <td mat-cell *matCellDef="let element"> {{element.mesa}} </td>
          </ng-container>     
          <ng-container matColumnDef="Estado">
              <th mat-header-cell *matHeaderCellDef> Estado </th>
              <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
          </ng-container>       
          <ng-container matColumnDef="Detalle">
              <th mat-header-cell *matHeaderCellDef> Detalle </th>
              <td mat-cell *matCellDef="let element">
                    <button mat-icon-button (click)="showInfo(element)">
                        <mat-icon>assignment</mat-icon>
                    </button> 
              </td>    
          </ng-container> 
          <ng-container matColumnDef="Codigo">
            <th mat-header-cell *matHeaderCellDef> Generar Codigo </th>
            <td mat-cell *matCellDef="let element">
                <button mat-icon-button (click)="generarCodigo(element)">
                    <mat-icon>lock</mat-icon>
                </button> 
            </td>    
          </ng-container> 
          <ng-container matColumnDef="Codigo Generado">
            <th mat-header-cell *matHeaderCellDef> Codigo Generado </th>
            <td  mat-cell *matCellDef="let element"> {{element.codigo}} </td>                                   
          </ng-container>  
          <ng-container matColumnDef="Aceptar">
            <th mat-header-cell *matHeaderCellDef> Aceptar Pedido </th>
            <td mat-cell *matCellDef="let element">
                <button mat-icon-button (click)="aceptarPedido(element)">
                    <mat-icon>check_circle</mat-icon>
                </button> 
            </td>    
          </ng-container>        
          <ng-container matColumnDef="Imágen">
            <th mat-header-cell *matHeaderCellDef> Imágen Mesa </th>
            <td mat-cell *matCellDef="let element">
                    <button type="button" mat-raised-button (click)="fileInput.click()">Seleccionar ..</button>
                    <input hidden (change)="ImagenCargada($event)" #fileInput type="file" id="file">
            </td>    
          </ng-container> 
          <input #imgPedido type="hidden" [value]="urlImagen | async"> 
          <ng-container matColumnDef="File">
                <th mat-header-cell *matHeaderCellDef> Archivo </th>
                <td mat-cell *matCellDef="let element"> {{element.foto | mostrarFoto}} </td>
        </ng-container>   
             <!-- <ng-container matColumnDef="Importe">
              <th mat-header-cell *matHeaderCellDef> Monto Total </th>
              <td mat-cell *matCellDef="let element"> {{element.montoTotal}} </td>
          </ng-container> -->     
           <!-- <ng-container matColumnDef="Tiempo Elaboracion">
              <th mat-header-cell *matHeaderCellDef> Tiempo Elaboracion </th>
              <td mat-cell *matCellDef="let element"> {{element.tiempoElaboracion}} </td>
          </ng-container>  -->
          <!-- <ng-container matColumnDef="Cliente">
            <th mat-header-cell *matHeaderCellDef> Cliente </th>
            <td mat-cell *matCellDef="let element"> {{element.cliente}} </td>
          </ng-container>  -->
     </tr>
     <div>
          <tr mat-header-row *matHeaderRowDef="columsPedido"></tr>
          <tr mat-row *matRowDef="let row; columns: columsPedido;" [appColorPedidoPendiente]="row.estado" ></tr>
      </div>
</table>
<br><br>
<label>Detalle del Pedido:</label>
    <table  mat-table [dataSource]="productos">
           <tr>
                <ng-container matColumnDef="Descripcion">
                    <th mat-header-cell *matHeaderCellDef> Descripcion </th>
                    <td mat-cell *matCellDef="let prod"> {{prod.descripcion}} </td>
                </ng-container> 
                <ng-container matColumnDef="Precio">
                        <th mat-header-cell *matHeaderCellDef> Precio </th>
                        <td mat-cell *matCellDef="let prod"> {{prod.precio}} </td>
                </ng-container> 
                <ng-container matColumnDef="Empleado">
                        <th mat-header-cell *matHeaderCellDef> Empleado </th>
                        <td mat-cell *matCellDef="let prod"> {{prod.empleado}} </td>
                </ng-container> 
                <ng-container matColumnDef="Estado Producto">
                        <th mat-header-cell *matHeaderCellDef> Estado Producto </th>
                        <td mat-cell *matCellDef="let prod"> {{prod.estadoProdPedido}} </td>
                </ng-container> 
                <ng-container matColumnDef="Tiempo Promedio Elaboracion">
                        <th mat-header-cell *matHeaderCellDef> Tiempo Promedio Elaboracion </th>
                        <td mat-cell *matCellDef="let prod"> {{prod.tiempoPromedioElaboracion}} </td>
                </ng-container>
                <ng-container matColumnDef="Foto">
                        <th mat-header-cell *matHeaderCellDef> Foto </th>
                        <td mat-cell *matCellDef="let prod" style="padding-top: 1%;padding-bottom: 1%;">
                                <img style="width: 100px;" src="{{prod.foto}}" class="md-card-image" alt="image caption"/>
                        </td>
                </ng-container>                 
           </tr>
           <div>
                <tr mat-header-row *matHeaderRowDef="columsProductoPedido"></tr>
                <tr mat-row *matRowDef="let row; columns: columsProductoPedido;"></tr>
            </div> 
    </table>

     <!-- <ul *ngFor="let item of pedidos">
     <div *ngIf="item.estado==pendiente">
                <p >Mesa: {{item.mesa}}</p>
                <p >Importe: {{item.montoTotal}}</p>
                <p >Estado Pedido: {{item.estado}}</p>
                <p >Cliente: {{item.nombreCliente}}</p>   
                <p >Tiempo Elaboracion: {{item.tiempoElaboracion}} (tiempo restante)</p>       
                <ul *ngFor="let producto of item.productos">
                        <p >descripcion: {{producto.descripcion}}</p>
                        <p >precio: {{producto.precio}}</p>
                        <p >estado producto: {{producto.estadoProdPedido}}</p>
                        <p >tiempo Elaboracion: {{producto.tiempoPromedioElaboracion}}</p>
                        <p >......................</p> -->
                        <!-- <p >nombre Cliente: {{item.nombreCliente}}</p>   
                        <p >tiempo restante: {{item.tiempoElaboracion}}</p>        -->
                <!-- </ul>
                <button (click)="generarCodigo(item)">Generar Codigo</button>
                
                <p *ngIf="!this.codigo==''">Codigo Generado: {{this.codigo}}</p>
                <br>
                <form class="form-group"> -->
                                <!-- <label for="customFile">Imágen</label> -->
                                <!-- <div class="custom-file">
                                  <input type="file" class="custom-file-input" id="customFile" accept=".png, .jpg"
                                    (change)="ImagenCargada($event)">
                                  <label class="custom-file-label" for="customFile">{{imgName}}</label>
                                </div>
                  </form>
              
                 <input #imgPedido type="hidden" [value]="urlImagen | async">
                <br>
                 <button (click)="aceptarPedido(item)">Aceptar Pedido</button>
                <p >======================</p>   
     </div>
    </ul>  --> 

